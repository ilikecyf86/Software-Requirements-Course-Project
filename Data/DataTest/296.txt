Che Server | Ping Ws Agent IllegalArgumentException

Hi, I'm running che server native in a Centos7 machine. And Docker in same machine. I can start ws-agent, but for some reason the process never end because the exeception bellow: 2016-03-17 10:44:33,085[kspaceManager-2] [INFO ] [o.e.c.a.m.s.MachineManager 166] - Creating machine [ws = workspacelsqomas2wphdpv3m: env = wksp-iao3: machine = ws-machine] Exception in thread "WorkspaceManager-2" java.lang.RuntimeException: java.lang.IllegalArgumentException: protocol = http host = null at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1455) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441) at sun.net.www.protocol.http.HttpURLConnection.getHeaderField(HttpURLConnection.java:2979) at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:489) at org.eclipse.che.api.core.rest.DefaultHttpJsonRequest.doRequest(DefaultHttpJsonRequest.java:239) at org.eclipse.che.api.core.rest.DefaultHttpJsonRequest.request(DefaultHttpJsonRequest.java:145) at org.eclipse.che.api.machine.server.WsAgentLauncherImpl.pingWsAgent(WsAgentLauncherImpl.java:125) at org.eclipse.che.api.machine.server.WsAgentLauncherImpl.startWsAgent(WsAgentLauncherImpl.java:98) at org.eclipse.che.api.machine.server.MachineManager.createInstance(MachineManager.java:366) at org.eclipse.che.api.machine.server.MachineManager.createMachine(MachineManager.java:333) at org.eclipse.che.api.machine.server.MachineManager.createMachineSync(MachineManager.java:167) at org.eclipse.che.api.workspace.server.RuntimeWorkspaceRegistry.createMachine(RuntimeWorkspaceRegistry.java:421) at org.eclipse.che.api.workspace.server.RuntimeWorkspaceRegistry.startEnvironment(RuntimeWorkspaceRegistry.java:320) at org.eclipse.che.api.workspace.server.RuntimeWorkspaceRegistry.start(RuntimeWorkspaceRegistry.java:146) at org.eclipse.che.api.workspace.server.WorkspaceManager.performSyncStart(WorkspaceManager.java:637) at org.eclipse.che.api.workspace.server.WorkspaceManager.lambda$performAsyncStart$2(WorkspaceManager.java:608) at org.eclipse.che.commons.lang.concurrent.CopyThreadLocalRunnable.run(CopyThreadLocalRunnable.java:28) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745) Caused by: java.lang.IllegalArgumentException: protocol = http host = null at sun.net.spi.DefaultProxySelector.select(DefaultProxySelector.java:176) at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1099) at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:999) at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:933) at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1513) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441) at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480) ... 16 more My startup command is: ./eclipse-che/bin/che.sh -r:172.10.1.43 -d -g start Where "r" is the machine ip, i tried with localhost too without success. My docker ps result: CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 739482fa8a10 eclipse-che/che_workspacelsqomas2wphdpv3m_ws-machine_jg1am "/bin/sh -c 'sudo /us" 45 minutes ago Up 45 minutes 0.0.0.0:32783->22/tcp, 0.0.0.0:32782->4401/tcp, 0.0.0.0:32780->4403/tcp, 0.0.0.0:32781->4403/tcp, 0.0.0.0:32779->4411/tcp, 0.0.0.0:32778->8000/tcp, 0.0.0.0:32777->8080/tcp, 0.0.0.0:32776->9876/tcp che_workspacelsqomas2wphdpv3m_ws-machine_jg1am 48d5ffac0537 eclipse-che/che_workspacenlw9jbw8oga7iuj4_ws-machine_88210 "/bin/sh -c 'sudo /us" 18 hours ago Up 18 hours 0.0.0.0:32775->22/tcp, 0.0.0.0:32774->4401/tcp, 0.0.0.0:32772->4403/tcp, 0.0.0.0:32773->4403/tcp, 0.0.0.0:32771->4411/tcp, 0.0.0.0:32770->8000/tcp, 0.0.0.0:32769->8080/tcp, 0.0.0.0:32768->9876/tcp che_workspacenlw9jbw8oga7iuj4_ws-machine_88210 2b6159855070 registry:2 "/bin/registry /etc/d" 36 hours ago Up 18 hours 0.0.0.0:5000->5000/tcp registry I can access ws-agent containers, the tomcat inside machines looks good: [STDOUT] Listening for transport dt_socket at address: 4403 [STDOUT] 2016-03-16 20:16:45,152[main] [INFO ] [o.a.c.s.VersionLoggerListener 89] - Server version: Apache Tomcat/8.0.29 [STDOUT] 2016-03-16 20:16:45,154[main] [INFO ] [o.a.c.s.VersionLoggerListener 91] - Server built: Nov 20 2015 09:18:00 UTC [STDOUT] 2016-03-16 20:16:45,159[main] [INFO ] [o.a.c.s.VersionLoggerListener 93] - Server number: 8.0.29.0 [STDOUT] 2016-03-16 20:16:45,160[main] [INFO ] [o.a.c.s.VersionLoggerListener 95] - OS Name: Linux [STDOUT] 2016-03-16 20:16:45,160[main] [INFO ] [o.a.c.s.VersionLoggerListener 97] - OS Version: 3.10.0-327.10.1.el7.x86_64 [STDOUT] 2016-03-16 20:16:45,160[main] [INFO ] [o.a.c.s.VersionLoggerListener 99] - Architecture: amd64 [STDOUT] 2016-03-16 20:16:45,160[main] [INFO ] [o.a.c.s.VersionLoggerListener 101] - Java Home: /opt/jdk1.8.0_45/jre [STDOUT] 2016-03-16 20:16:45,161[main] [INFO ] [o.a.c.s.VersionLoggerListener 103] - JVM Version: 1.8.0_45-b14 [STDOUT] 2016-03-16 20:16:45,161[main] [INFO ] [o.a.c.s.VersionLoggerListener 105] - JVM Vendor: Oracle Corporation [STDOUT] 2016-03-16 20:16:45,161[main] [INFO ] [o.a.c.s.VersionLoggerListener 107] - CATALINA_BASE: /home/user/che/ws-agent [STDOUT] 2016-03-16 20:16:45,161[main] [INFO ] [o.a.c.s.VersionLoggerListener 109] - CATALINA_HOME: /home/user/che/ws-agent [STDOUT] 2016-03-16 20:16:45,162[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.util.logging.config.file=/home/user/che/ws-agent/conf/logging.properties [STDOUT] 2016-03-16 20:16:45,162[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager [STDOUT] 2016-03-16 20:16:45,162[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Xms256m [STDOUT] 2016-03-16 20:16:45,162[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Xmx1024m [STDOUT] 2016-03-16 20:16:45,162[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.security.egd=file:/dev/./urandom [STDOUT] 2016-03-16 20:16:45,163[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dche.logs.dir=/home/user/che/ws-agent/logs [STDOUT] 2016-03-16 20:16:45,163[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote [STDOUT] 2016-03-16 20:16:45,163[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote.ssl=false [STDOUT] 2016-03-16 20:16:45,163[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote.authenticate=false [STDOUT] 2016-03-16 20:16:45,164[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dche.local.conf.dir=/mnt/che/conf [STDOUT] 2016-03-16 20:16:45,164[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -agentlib:jdwp=transport=dt_socket,address=4403,server=y,suspend=n [STDOUT] 2016-03-16 20:16:45,164[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.endorsed.dirs=/home/user/che/ws-agent/endorsed [STDOUT] 2016-03-16 20:16:45,164[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcatalina.base=/home/user/che/ws-agent [STDOUT] 2016-03-16 20:16:45,164[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcatalina.home=/home/user/che/ws-agent [STDOUT] 2016-03-16 20:16:45,165[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.io.tmpdir=/home/user/che/ws-agent/temp [STDOUT] 2016-03-16 20:16:45,311[main] [INFO ] [o.a.c.http11.Http11NioProtocol 425] - Initializing ProtocolHandler ["http-nio-4401"] [STDOUT] 2016-03-16 20:16:45,327[main] [INFO ] [o.a.t.util.net.NioSelectorPool 72] - Using a shared selector for servlet write/read [STDOUT] 2016-03-16 20:16:45,330[main] [INFO ] [o.a.catalina.startup.Catalina 587] - Initialization processed in 444 ms [STDOUT] 2016-03-16 20:16:45,407[main] [INFO ] [c.m.JmxRemoteLifecycleListener 332] - The JMX Remote Listener has configured the registry on port 32002 and the server on port 32102 for the Platform server [STDOUT] 2016-03-16 20:16:45,407[main] [INFO ] [o.a.c.core.StandardService 433] - Starting service Catalina [STDOUT] 2016-03-16 20:16:45,407[main] [INFO ] [o.a.c.core.StandardEngine 259] - Starting Servlet Engine: Apache Tomcat/8.0.29 [STDOUT] 2016-03-16 20:16:45,468[ost-startStop-1] [INFO ] [o.a.c.startup.HostConfig 916] - Deploying web application archive /home/user/che/ws-agent/webapps/ide.war [STDOUT] Wed Mar 16 20:16:50 UTC 2016 - [localhost-startStop-1] Product-specified preferences called before plugin is started [STDOUT] 2016-03-16 20:16:50,738[rrest.WSClient1] [INFO ] [.c.a.c.n.WSocketEventBusClient 223] - Open connection to ws://che-host:8080/ide/api/eventbus/?token=dummy_token. [STDOUT] 2016-03-16 20:16:50,822[ost-startStop-1] [INFO ] [o.a.c.startup.HostConfig 980] - Deployment of web application archive /home/user/che/ws-agent/webapps/ide.war has finished in 5,354 ms [STDOUT] 2016-03-16 20:16:50,827[main] [INFO ] [o.a.c.http11.Http11NioProtocol 470] - Starting ProtocolHandler ["http-nio-4401"] [STDOUT] 2016-03-16 20:16:50,834[main] [INFO ] [o.a.catalina.startup.Catalina 638] - Server startup in 5503 ms [STDOUT] 2016-03-16 20:47:10,024[lient-AsyncIO-2] [INFO ] [.c.a.c.n.WSocketEventBusClient 192] - Close connection to ws://che-host:8080/ide/api/eventbus/?token=dummy_token with status 1000 message Http session destroyed. [STDOUT] 2016-03-16 20:47:10,024[lient-AsyncIO-2] [INFO ] [.c.a.c.n.WSocketEventBusClient 193] - Init connection task ws://che-host:8080/ide/api/eventbus/?token=dummy_token [STDOUT] 2016-03-16 20:47:10,030[rrest.WSClient2] [INFO ] [.c.a.c.n.WSocketEventBusClient 223] - Open connection to ws://che-host:8080/ide/api/eventbus/?token=dummy_token. [STDOUT] 2016-03-16 21:17:10,078[lient-AsyncIO-2] [INFO ] [.c.a.c.n.WSocketEventBusClient 192] - Close connection to ws://che-host:8080/ide/api/eventbus/?token=dummy_token with status 1000 message Http session destroyed. I think, for some reason, the Che can't find the containers socket/host/ip to start a comunication.