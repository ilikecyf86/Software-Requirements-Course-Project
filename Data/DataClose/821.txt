Unable to launch Exec Agent in workspace when CHE_DOCKER_DAEMON__URL is set to remote host - AWS EC2
kind/question 
Scenario: EC2 Instance1: Che-Server External IP: 13.X.X.169 Internal IP: 172.31.9.201 EC2 Instance2: Docker Daemon & Workspaces External IP: 13.X.X.116 Internal IP: 172.31.8.50 I use the following command to start eclipse che docker run -it --rm -e CHE_DOCKER_IP_EXTERNAL=13.X.X.169 -e CHE_DOCKER_DAEMON__URL=http://13.X.X.116:2375 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/data:/data eclipse/che:5.13.0 start --debug Eclipse Che setup goes through fine, I'm able to access the che dashboard at http://13.X.X.169:8080 However, when I launch any workspace, I get the following error pop-up Error when starting agent Unable to start workspace agent. Error when trying to start the workspace agent: Start of environment 'default' failed. Error: Fail launching agent Exec-agent. Workspace ID:workspacehpdfbe9zsilur0ui The logs from machine: [DOCKER] latest: Pulling from eclipse/ubuntu_jdk8 [DOCKER] Digest: sha256:5a67c924f0ca4086897b29d2920579857f035b304a438b50805b6de58a2540bd [DOCKER] Status: Image is up to date for eclipse/ubuntu_jdk8:latest [STDOUT] Exec Agent binary is downloaded remotely [STDERR] [STDERR] gzip: stdin: unexpected end of file [STDERR] tar: Child returned status 1 [STDERR] tar: Error is not recoverable: exiting now [STDERR] /bin/sh: 216: /home/user/che/exec-agent/che-exec-agent: not found My thoughts: The workspace creation is successful, I can see the workspace being created on running docker ps in EC2 Instance2 i.e. 13.X.X.116 But, all the libraries required to launch the wsagents are located in EC2 Instance1 i.e. 13.X.X.169 under /opt/data/instance/data/lib, hence the STDOUT "Exec Agent binary is downloaded remotely", could it be that agents libraries are being download into EC2 Instance2 i.e. 13.X.X.116 through CURL & workspace creation is being timed out or any firewall rules blocking the execution or such a setup of che doesn't work ? I'd glad if you could help in finding the right answer. Reproduction Steps: Mentioned above. OS and version: Ubuntu-Xenial 16.04 Diagnostics: INFO: (che cli): 5.13.0 - using docker 17.03.1-ce / native CLI: TTY: true Daemon: /var/run/docker.sock Image: eclipse/che:5.13.0 Version: 5.13.0 Command: info Parameters: info Mounts: /data: /opt/data /data/instance: not set /data/backup: not set /repo: not set /assembly: not set /sync: not set /unison: not set /chedir: not set System: Docker: native Proxy: not set Internal: CHE_VERSION: 5.13.0 CHE_HOST: 172.31.9.201 CHE_INSTANCE: /opt/data/instance CHE_CONFIG: /opt/data CHE_BACKUP: /opt/data/backup CHE_REGISTRY: /version CHE_DEBUG: false IP Detection: 172.31.9.201 Initialized: true Image Registry: IMAGE_INIT=eclipse/che-init:5.13.0 IMAGE_CHE=eclipse/che-server:5.13.0 IMAGE_COMPOSE=docker/compose:1.8.1 IMAGE_TRAEFIK=traefik:v1.3.0-rc3 BOOTSTRAP_IMAGE_ALPINE=alpine:3.4 BOOTSTRAP_IMAGE_CHEIP=eclipse/che-ip:5.13.0 UTILITY_IMAGE_CHEACTION=eclipse/che-action:5.13.0 UTILITY_IMAGE_CHEDIR=eclipse/che-dir:5.13.0 UTILITY_IMAGE_CHETEST=eclipse/che-test:5.13.0 UTILITY_IMAGE_CHEMOUNT=eclipse/che-mount:5.13.0 che.env: CHE_HOST=172.31.9.201 CHE_SINGLE_PORT=false