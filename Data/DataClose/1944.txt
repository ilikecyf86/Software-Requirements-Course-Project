Workspace doesn't start on Che running on Amazon EC2 instance using remote browser
kind/question 
Installed Docker and Eclipse Che on Amazon EC2 instance that has both a private and a public IP. When I connect via Chrome and attempt to create a new workspace, the workspace fails to start. I have tried setting the CHE_HOST_IP to both the public and private IP addresses. Reproduction Steps: set CHE_HOST_IP to private IP address start Eclipse Che click on a workspace and click start Expected behavior: Workspace starts and I get a browser access to the workspace Observed behavior: Eclipse Che reports "Starting Workspace Agent" The log shows: [DOCKER] latest: Pulling from codenvy/ubuntu_jdk8 [DOCKER] Digest: sha256:018f74a9a6f407f10c2815c39fb965f9dea8a1acb0f5cd2de7ef1ec32f133ed5 [DOCKER] Status: Image is up to date for codenvy/ubuntu_jdk8:latest Listening for transport dt_socket at address: 4403 2016-12-12 23:51:33,384[main] [INFO ] [o.a.c.s.VersionLoggerListener 89] - Server version: Apache Tomcat/8.0.38 2016-12-12 23:51:33,386[main] [INFO ] [o.a.c.s.VersionLoggerListener 91] - Server built: Oct 6 2016 20:51:55 UTC 2016-12-12 23:51:33,387[main] [INFO ] [o.a.c.s.VersionLoggerListener 93] - Server number: 8.0.38.0 2016-12-12 23:51:33,388[main] [INFO ] [o.a.c.s.VersionLoggerListener 95] - OS Name: Linux 2016-12-12 23:51:33,388[main] [INFO ] [o.a.c.s.VersionLoggerListener 97] - OS Version: 3.10.0-514.el7.x86_64 2016-12-12 23:51:33,388[main] [INFO ] [o.a.c.s.VersionLoggerListener 99] - Architecture: amd64 2016-12-12 23:51:33,388[main] [INFO ] [o.a.c.s.VersionLoggerListener 101] - Java Home: /opt/jdk1.8.0_45/jre 2016-12-12 23:51:33,388[main] [INFO ] [o.a.c.s.VersionLoggerListener 103] - JVM Version: 1.8.0_45-b14 2016-12-12 23:51:33,389[main] [INFO ] [o.a.c.s.VersionLoggerListener 105] - JVM Vendor: Oracle Corporation 2016-12-12 23:51:33,389[main] [INFO ] [o.a.c.s.VersionLoggerListener 107] - CATALINA_BASE: /home/user/che/ws-agent 2016-12-12 23:51:33,389[main] [INFO ] [o.a.c.s.VersionLoggerListener 109] - CATALINA_HOME: /home/user/che/ws-agent 2016-12-12 23:51:33,389[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.util.logging.config.file=/home/user/che/ws-agent/conf/logging.properties 2016-12-12 23:51:33,389[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 2016-12-12 23:51:33,390[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Xms256m 2016-12-12 23:51:33,393[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Xmx2048m 2016-12-12 23:51:33,394[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.security.egd=file:/dev/./urandom 2016-12-12 23:51:33,394[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dche.logs.dir=/home/user/che/ws-agent/logs 2016-12-12 23:51:33,394[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djdk.tls.ephemeralDHKeySize=2048 2016-12-12 23:51:33,394[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources 2016-12-12 23:51:33,395[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -agentlib:jdwp=transport=dt_socket,address=4403,server=y,suspend=n 2016-12-12 23:51:33,395[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote 2016-12-12 23:51:33,395[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote.ssl=false 2016-12-12 23:51:33,395[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcom.sun.management.jmxremote.authenticate=false 2016-12-12 23:51:33,396[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dche.local.conf.dir=/mnt/che/conf 2016-12-12 23:51:33,397[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.endorsed.dirs=/home/user/che/ws-agent/endorsed 2016-12-12 23:51:33,398[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcatalina.base=/home/user/che/ws-agent 2016-12-12 23:51:33,398[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Dcatalina.home=/home/user/che/ws-agent 2016-12-12 23:51:33,398[main] [INFO ] [o.a.c.s.VersionLoggerListener 115] - Command line argument: -Djava.io.tmpdir=/home/user/che/ws-agent/temp 2016-12-12 23:51:33,575[main] [INFO ] [o.a.c.http11.Http11NioProtocol 443] - Initializing ProtocolHandler ["http-nio-4401"] 2016-12-12 23:51:33,592[main] [INFO ] [o.a.t.util.net.NioSelectorPool 72] - Using a shared selector for servlet write/read 2016-12-12 23:51:33,603[main] [INFO ] [o.a.catalina.startup.Catalina 591] - Initialization processed in 528 ms 2016-12-12 23:51:33,632[main] [INFO ] [c.m.JmxRemoteLifecycleListener 332] - The JMX Remote Listener has configured the registry on port 32002 and the server on port 32102 for the Platform server 2016-12-12 23:51:33,632[main] [INFO ] [o.a.c.core.StandardService 435] - Starting service Catalina 2016-12-12 23:51:33,632[main] [INFO ] [o.a.c.core.StandardEngine 259] - Starting Servlet Engine: Apache Tomcat/8.0.38 2016-12-12 23:51:33,741[ost-startStop-1] [INFO ] [o.a.c.startup.HostConfig 911] - Deploying web application archive /home/user/che/ws-agent/webapps/ROOT.war 2016-12-12 23:51:42,576[ost-startStop-1] [INFO ] [.e.c.a.v.i.f.e.LoEventListener 48] - Subscribing to event service: class org.eclipse.che.api.vfs.impl.file.event.LoEventListener 2016-12-12 23:51:42,580[ost-startStop-1] [INFO ] [.e.c.a.v.i.f.e.VfsEventService 58] - Starting virtual file system event service: LoEventService 2016-12-12 23:51:42,588[ost-startStop-1] [INFO ] [.e.c.a.v.i.f.e.VfsEventService 58] - Starting virtual file system event service: HiEventService Mon Dec 12 23:51:42 UTC 2016 - [localhost-startStop-1] Product-specified preferences called before plugin is started 2016-12-12 23:51:42,868[rest.WSClient-0] [INFO ] [.c.a.c.n.WSocketEventBusClient 227] - Open connection to ws://che-host:8080/wsmaster/api/eventbus/?token=dummy_token. 2016-12-12 23:51:43,119[s polled Thread] [INFO ] [o.e.c.p.m.server.rmi.RmiClient 130] - Port/Name:12712/MavenRemoteServerImplb2781cda 2016-12-12 23:51:44,825[ost-startStop-1] [INFO ] [o.a.c.startup.HostConfig 975] - Deployment of web application archive /home/user/che/ws-agent/webapps/ROOT.war has finished in 11,083 ms 2016-12-12 23:51:44,829[main] [INFO ] [o.a.c.http11.Http11NioProtocol 488] - Starting ProtocolHandler ["http-nio-4401"] 2016-12-12 23:51:44,833[main] [INFO ] [o.a.catalina.startup.Catalina 642] - Server startup in 11229 ms 2016-12-12 23:51:45,015[nio-4401-exec-3] [WARN ] [o.e.c.impl.ContainerResponse 93] - Client has aborted connection. Response writing omitted. 2016-12-12 23:51:45,018[nio-4401-exec-1] [WARN ] [o.e.c.impl.ContainerResponse 93] - Client has aborted connection. Response writing omitted. 2016-12-12 23:51:45,021[nio-4401-exec-2] [WARN ] [o.e.c.impl.ContainerResponse 93] - Client has aborted connection. Response writing omitted. After a few minutes I get a popup that says: 52.222.19.85:8080 says: Unable to initialize IDE Then I get the following image Then the browser reports that the workspace is not running. Che version: 5.0.0-latest OS and version: Red Hat Enterprise Linux 3.10.0-514.el7.x86_64 x86_64 GNU/Linux Docker version: Client: Version: 1.12.3 API version: 1.24 Go version: go1.6.3 Git commit: 6b644ec Built: OS/Arch: linux/amd64 Server: Version: 1.12.3 API version: 1.24 Go version: go1.6.3 Git commit: 6b644ec Built: OS/Arch: linux/amd64 Che install: Used local install instructions on Amazon t2.medium instance https://eclipse-che.readme.io/docs/che-getting-started Additional information: We are in Amazon Gov Cloud so cannot use Bitnami. If I set CHE_HOST_IP to the public IP address I observe in the docker log that the workspace cannot be pinged with the public IP address. Problem started happening recently, didn't happen in an older version of Che: [Yes/No] No Problem can be reliably reproduced, doesn't happen randomly: [Yes/No] Yes